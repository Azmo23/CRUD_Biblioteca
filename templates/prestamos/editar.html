{% extends "base.html" %}

{% block content %}
<h1>Editar Préstamo</h1>
<form method="POST">
    <div class="mb-3">
        <label for="usuario_id" class="form-label">Usuario</label>
        <select class="form-select" id="usuario_id" name="usuario_id" required>
            {% for usuario in usuarios %}
            <option value="{{ usuario[0] }}" {% if usuario[0] == prestamo[1] %}selected{% endif %}>{{ usuario[1] }} {{ usuario[2] }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="libro_id" class="form-label">Libro</label>
        <select class="form-select" id="libro_id" name="libro_id" required>
            {% for libro in libros %}
            <option value="{{ libro[0] }}" {% if libro[0] == prestamo[2] %}selected{% endif %}>{{ libro[1] }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="fechaPrestamo" class="form-label">Fecha de Préstamo</label>
        <input type="date" class="form-control" id="fechaPrestamo" name="fechaPrestamo" value="{{ prestamo[3] }}" required>
    </div>
    <div class="mb-3">
        <label for="fechaDevolucion" class="form-label">Fecha de Devolución</label>
        <input type="date" class="form-control" id="fechaDevolucion" name="fechaDevolucion" value="{{ prestamo[4] }}" required>
    </div>
    <div class="mb-3">
        <label for="estado" class="form-label">Estado</label>
        <select class="form-select" id="estado" name="estado" required>
            <option value="Pendiente" {% if prestamo[5] == 'Pendiente' %}selected{% endif %}>Pendiente</option>
            <option value="Devuelto" {% if prestamo[5] == 'Devuelto' %}selected{% endif %}>Devuelto</option>
            <option value="Atrasado" {% if prestamo[5] == 'Atrasado' %}selected{% endif %}>Atrasado</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Actualizar</button>
    <a href="{{ url_for('prestamos') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}